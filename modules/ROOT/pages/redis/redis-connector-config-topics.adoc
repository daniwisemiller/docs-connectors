= Redis Additional Configuration Info - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

== Save a Value for a Key into a Redis Server

This use case describes how to use the connector to assign a value to a key in the Redis server.

. Create a new Mule Project by clicking *File* > *New* > *Mule Project*.
. In the new project dialog box, provide a name for your new project. Click *Finish*.
+
image::redis/redis-new-proj.png[New project dialog]
+
. Navigate through the project's structure and double click `src/main/mule/project-name.xml` to open it. The steps below are all performed on this file.
. Go to the palette and search for HTTP, then drag and drop a new *HTTP Connector Listener* to the canvas. This element is the entry point for the flow and provides the key and value to be set for that key.
. Go to the palette and search for Redis, then drag and drop a new *Redis Set* operation after the HTTP connector. This element sends data to the Redis server.
+
. Double click the *Redis Set* operation and set its properties as follows:
.. Set *Display Name* to *Set Value For Key Into Redis*.
.. Choose from the *Extension Configuration* drop down `Redis__Configuration`, which is the default name of a configuration, or any other configuration that you configured.
.. Choose *Set* from the Operation drop down.
.. Set Key to `#[payload.key]`.
.. Set Value to `#[payload.value]`.
+
image::redis/redis-set-config.png[]
+
. Go to the palette and search for Set Payload, then drag and drop a new Set Payload element after the Redis connector. This element creates the response for the incoming HTTP request.
+
image::redis/redis-set-raw-flow.png[]
+
. Double click the flow's top margin to open its properties, and change the name of the flow to `set-flow`.
+
image::redis/redis-set-flow-config.png[]
+
. Double click the HTTP Connector [Listener] to open its properties.
.. Click the green plus sign beside the Connector Configuration drop down menu.
.. A pop-up appears, leave the default configurations and click ok.
.. Set Path to `/`.
.. Set Display Name to `Listener`.
+
image::redis/redis-set-http-config.png[Set HTTP configuration]
+
. Double click *Set Payload and set its properties as below.
.. Set *Display Name* to `Set Value Response`.
.. Set *Value* to `Value Successfully Set`.
+
image::redis/redis-set-response-config.png[Set HTTP response configuration]
+
. If you configured a Redis global element with placeholder values, you must now provide values for these placeholders. Open `/src/main/resources/mule-app.properties` and provide values for following properties: `config.host`, `config.port`, and `config.connectionTimeout`.
. Deploy the app.
. Once the app is running, send an HTTP request to it to trigger its flow. To do this, use the `curl` command line utility or an HTTP client app (such as Postman) to send a POST request with content-type `application/x-www-form-urlencoded` and a body in `url-encoded` format to `+localhost:8081/+`. The request's body should contain a key and a value. For this you can use the following `curl` command:
+
`curl -X POST -d "key=test-key" -d "value=test-value" localhost:8081/`
+
Congratulations! You have just set a value for a key into the Redis server.

== See Also
* https://forums.mulesoft.com[MuleSoft Forum]
* https://support.mulesoft.com/s/knowledge[Knowledge Base Articles]
