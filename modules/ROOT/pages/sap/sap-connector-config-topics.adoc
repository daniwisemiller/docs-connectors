= SAP Additional Configuration Information - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

== Install SAP Libraries

. Browse to the SAP web site and download the version 3.0.18 libraries
for IDOC, JCO, and JCO Native. The library formats are usable by
Studio 7 directly without conversion. You can download them to
a folder on your computer. You must have a SAP ID to download the libraries.
+
*Note:* The file types for each library depend on your operating system:
+
** Windows: sapidoc3.jar, sapjco3.jar, sapjco3.dll
** Mac OS:  sapidoc3.jar, sapjco3.jar, libsapjco3.jnilib
** Linux:   sapidoc3.jar, sapjco3.jar, libsapjco3.so
+
. After installing the SAP connector in Studio and adding the connector to your Mule
project, double click the connector in the flow, and click the plus (*+*) sign
to the right of the Connector Configuration field.
+
This screen appears:
+
image::sap/sap-connector-configuration-01.png[SAP Outbound Configuration in Studio]
+
All three Add Dependency configurations are required to configure the SAP connector:

* <<Install the IDOC Library>>
* <<Install the JCO Library>>
* <<Install the JCO Native Library>>
* <<When Done Installing Libraries>>

== Install the IDOC Library

. Click Add Dependency.
. Click Install.
+
image::sap/sap-connector-configuration-02.png[Maven dependency for IDOC]
+
. In the Install menu, click Browse to locate the library file.
. Specify a unique Group ID, Artifact ID, and version.
+
image::sap/sap-connector-configuration-02-in.png[Maven dependency for IDOC]
+
When done, click *Finish* or if you want to cancel, click Remove Dependency.
+
image::sap/sap-connector-configuration-02-finish.png[Finish IDOC install screen]

== Install the JCO Library

. Click Add Dependency.
. Click Install.
+
image::sap/sap-connector-configuration-02.png[Maven dependency for JCO]
+
. In the Install menu, click Browse to locate the library file.
. Specify a unique Group ID, Artifact ID, and version.
+
image::sap/sap-connector-configuration-03-in.png[Maven dependency for JCO]
+
When done, click *Finish* or if you want to cancel, click Remove Dependency.
+
image::sap/sap-connector-configuration-03-finish.png[Finish JCO install screen]

== Install the JCO Native Library

. Click Add Dependency.
. Click Install.
+
image::sap/sap-connector-configuration-02.png[Maven dependency for JCO Native]
+
. In the Install menu, click Browse to locate the library file.
. Specify a unique Group ID, Artifact ID, and version.
+
image::sap/sap-connector-configuration-04-in.png[Maven dependency for JCO Native]
+
When done, click *Finish* or if you want to cancel, click Remove Dependency.
+
image::sap/sap-connector-configuration-04-finish.png[Finish JCO Native install screen]

== When Done Installing Libraries

When done, the configuration screen appears as follows with green check marks for each successfully installed library:

image::sap/sap-connector-libraries-installed.png[All dependent libraries installed]

. Add values for the remaining Global Element Properties fields as described
in the <<gepparms,Configure in Studio>> section. All the information is available
from your SAP site access.
. Click Test Connection to ensure that you have the correct login information.

== Define Extended Properties

To define extended properties for the SAP connector global element, complete the following steps:

. Navigate to the Advanced tab on the General pane:
+
image::sap/sap-connector-advanced-tab.png[Lower Advanced Tab]
+
. Locate the Extended Properties section at the top of the window.
. Select the Edit inline option.
. Click the plus button ('+') to add a new extended property.

For this to work you must set the property name, as defined by SAP, in your configuration.

=== SAP Inbound

There are no special Advanced properties for this configuration.

=== SAP Outbound

[%header%autowidth.spread]
|===
|Field |XML Attribute |Description |Default Value
|Display Name |name |The reference name of the endpoint used internally by Mule configuration. |
|Encoding |encoding |Canonical name of an encoding. See https://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html[Oracle's Supported Encodings]. |
|Default idocument Version |defaultIdocumentVersion |This version is used when sending the IDoc. Values for the IDoc version correspond to IDOC_VERSION_xxxx constants in com.sap.conn.idoc.IDocFactory. |
|Disable Function template cache flag |disableFunctionTemplateCacheFlag |Indicates if the function template cache should be disabled. |false
|Evaluate response flag |evaluateResponseFlag |Indicates if an error response should throw an exception or let the user handle it as another result. |false
|Log trace flag |logTraceFlag |Indicates if the trace should be logged on the Mule server. |false
|Use SAP default format |useSAPFormat |Indicates to use SAP default format when working with BAPI functions over sRFC. |false
|===

== SAP JCo Notes

SAP JCo facilitates communication between an SAP backend system and a Java application. SAP JCo allows Java programs to connect to SAP systems and invoke Remote Function Modules. SAP JCo also allows parsing of IDocs (SAP Intermediate Documents), among other object types. Both inbound and outbound communications are supported.

* Java API: Handles dynamic metadata lookup and caching. It implements JCO.Function, which is the container for parameters and/or tables for the SAP Function Module (BAPI) in Java. Java applications are built on top of the Java API.

* JNI (Java Native Interface): Originally, SAP created libraries in C language to allow direct RFC calls to SAP, to manipulate with data. JCo wraps C libraries in Java to provide platform-native access into the SAP system. RFC Middleware uses RFC Library through (JNI) Layer.

* RFC (Remote Function Call): Communication with the SAP system is performed over the RFC protocol. RFC means calling BAPI or triggering IDoc processing that runs in another system as calling program. The RFC interface enables function calls between two SAP systems or between the SAP and external system.

* RFC Library: Libraries of C language-based functions to access the SAP system. RFC library is addressed by JNI.

* RFC Layer: SAP component that processes RFC calls.

* SAP Java IDoc Class Library: Provides structured, high-level interpretation and navigation of SAP IDocs in Java. It consists of the following add-on packages:
** SAP Java Base IDoc Class Library: a middleware-independent library that provides a set of general base classes and interfaces for middleware dependent Java IDoc Class Library implementations.
** SAP Java Connector IDoc Class Library: A middleware-independent library for creating, sending, and receiving IDocs.

* FM (Function Module): Function modules are procedures that are defined in the ABAP language of SAP. It allows the encapsulation and reuse of global functions in the SAP System.

* BAPI (Business Application Programming Interface): The Function Module that fulfills certain design criteria, such as:
** Implements a method of a SAP Business Object.
** Maintains a static interface through different versions of the SAP system.
** Is remote-enabled.
** Runs to completion with or without user interaction.
** Handles errors.

* IDoc (Intermediate Document): Standard SAP format for electronic data interchange between SAP systems. Different messages types (such as delivery notes or purchase orders) generally correspond to different special formats, known as IDoc types. Multiple message types with related content can, however, be assigned to a single IDoc type.

* ALE (Application Link Enabling): Technology for setting up and operating distributed applications. ALE facilitates distributed, yet integrated, installation of SAP systems. This involves business-driven message exchange using consistent data across loosely linked SAP applications. Applications are integrated through synchronous and asynchronous communication, rather than by use of a central database.

* SAP NetWeaver: One of the main technologies and application platforms used by SAP solutions. Its main component is the SAP Web Application Server (WebAS), which provides the runtime environment for SAP applications like ERP, CRM, SCM, PLM, SRM, BI. Other components include enterprise portal, exchange infrastructure, master data management and mobile infrastructure. The SAP NetWeaver is an umbrella term for these technical components.

* SAP NetWeaver runs on both Java and ABAP stacks.

* ABAP (Advanced Business Application Programming): SAP's proprietary programming language and part of the NetWeaver platform for building business applications.

== Next

Now that you have completed configuration, you can try out the SAP xref:sap/sap-connector-examples.adoc[Examples].

== See Also

* https://forums.mulesoft.com[MuleSoft Forum]
* https://support.mulesoft.com/s/knowledge[Knowledge Base Articles]
