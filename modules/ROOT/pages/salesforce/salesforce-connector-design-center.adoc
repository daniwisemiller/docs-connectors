= Salesforce Design Center Configuration - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

Create applications using the Salesforce connector. You can use an HTTP Listener, Scheduler, or the Salesforce connector as a trigger to initiate execution of the Mule flow. When changes occur in Salesforce, the Salesforce trigger starts the Mule flow to process the change. In addition, you can use a Salesforce operation to process the changes as a component.

To configure a connector in Design Center:

. Configure the trigger, which can be an operation from this connector (if available), an HTTP Listener, or a Scheduler.
. Configure the target component for this connector.

== Configure the Trigger

Configure an input source for this connector, such as a connector operation, an HTTP Listener, or a Scheduler. If you use the Salesforce connector as your trigger, a change in a Salesforce object, topic, or channel is sent as input to your application to let you process the change. Alternatively, you can specify the trigger as an HTTP Listener as input to your application from a browser or an application like Postman or `curl`, or you can use Scheduler to provide input to your application at a specific time.

If you want a Salesforce event to initiate access to your app (that is, to trigger your app), choose one of the Salesforce operations. Alternatively, you can choose an *HTTP Listener* or *Scheduler* trigger.

Salesforce trigger operations:

* *On Deleted Object* - Delete an object.
* *On Modified Object* - Modify an object.
* *On New Object* - Create a new object. Possible object types are `Contact`, `Lead`, `Account`, `Contracts`, `Opportunity`, or the name of a custom object. The object types correspond to the Salesforce object you want to create, modify, or delete.
* *Replay Channel* - Subscribe to a streaming channel. This trigger provides channel-related notification settings for new events and events stored by Salesforce within the 24-hour retention period. Events that take place in the specified channel trigger the flow.
+
NOTE: Before you can subscribe to a channel or topic, it must first be published to Salesforce.
+
* *Replay Topic* - Subscribe to a topic. This trigger provides topic-related notification settings for new events and events stored by Salesforce within the 24-hour retention period. Events that take place on records in the specified topic trigger the flow.
* *Subscribe Channel* - Subscribe to a streaming channel. This trigger provides channel-related notification settings for new events that take place after you subscribe.
* *Subscribe Topic* - Subscribe to a topic. This trigger provides topic-related notification settings for new events that take place after you subscribe.

For example:

. Create a New Mule Application in Design Center.
. Set the trigger. For example, you can use *Salesforce* > *New Object* or any other operation.
. Click *Set up*.

== Configure a Connection Type

. Specify the Connection Type:
+
[%header%autowidth.spread]
|===
|Connection Type |Salesforce Information Site
| <<Configure Basic Username Password Authorization, Basic Username Password>> |https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_calls_login.htm[SOAP API Username Password Login]
| <<Configure OAuth 2.0 Authorization, OAuth 2.0>> |https://help.salesforce.com/articleView?id=remoteaccess_oauth_web_server_flow.htm[OAuth 2.0 Web Server Authorization Flow]
| <<Configure OAuth JWT Authorization, OAuth JWT>> |https://help.salesforce.com/articleView?id=remoteaccess_oauth_jwt_flow.htm[OAuth 2.0 JWT Bearer Token Flow]
| <<Configure OAuth SAML Authorization, OAuth SAML>> |https://help.salesforce.com/apex/HTViewHelpDoc?id=remoteaccess_oauth_SAML_bearer_flow.htm[OAuth 2.0 SAML Bearer Assertion Flow]
| <<Configure OAuth Username Password Authorization, OAuth Username Password>> |https://help.salesforce.com/articleView?id=remoteaccess_oauth_username_password_flow.htm[OAuth 2.0 Username-Password Flow]
|===
+
. Specify the parameters as required for each configuration type, and click *Test* to ensure you have a valid connection to Salesforce.
. If needed, configure the *Apex* tab to decide what metadata to fetch and to add Apex class names.
. If you haven't specified a `Connection Type`, and if needed, configure the *Advanced* tab to set the `Max Idle Time` and `Time Units` for how long to hold open a connection before it expires.
. After you specify a connection type, if needed, you can use the *Advanced* tab to change values for the Reconnection Strategy, Pooling Profile, and Expiration Policy.
. If needed, set the `Redelivery Policy` on the main configuration screen. This indicates the maximum number of tries to deliver trigger content.

== Configure a Target Component

In Design Center's Flow Designer, after you specify a trigger, you can add the Salesforce connector as a component to process the input you received from the trigger. You may also want to add a DataWeave Transform between the trigger and the component to transform the input information to what you want as input to the Salesforce connector component. The Salesforce connector doesn't have to be a component, it depends on what you're trying to accomplish with your app.

To add a Salesforce connector as a component:

. After creating a trigger, click the plus sign. 
. If needed, click *Transform* to use DataWeave to map fields between your received data and what to use with your Salesforce component.
. Click the plus sign to the right of the *Choose an operation*.
+
The following are examples of the operations you can set in the Salesforce component:
+
*Create*:
+
* *Type*: Salesforce object type.
* *Records*: xref:design-center::function-editor-concept.adoc#to-use-the-function-editor[Function editor expression].
+
*Query*:
+
* *Salesforce query*: Salesforce query to retrieve objects.
* *Parameters*: Values for placeholders in the Salesforce query.
+
*Update*:
+
* *Type*: Salesforce object type.
* *Records*: xref:design-center::function-editor-concept.adoc[Function editor expression] to produce a collection of Salesforce objects to be updated.
+
*Delete*:
+
* *Records To Delete Ids*: xref:design-center::function-editor-concept.adoc[Function editor expression] to produce a collection of Salesforce objects to be deleted.

After completing the trigger, proceed to <<Configure Salesforce as a Component>>.

== Configure Basic Username Password Authorization

Important fields:

* *Username* (required): Enter the Salesforce username.
* *Password* (required): Enter the corresponding password.
* *Security Token*: Enter the corresponding security token.

[NOTE]
Implementing OAuth 2.0-based authentication mechanisms involves extra steps, but may be preferred if your service is exposed to external users, as it ensures better security.

== Configure OAuth 2.0 Authorization

Important fields:

* *Display* (required): How to optimize the display: `Page` = Full-page authorization screen (default), `Popup` = Compact dialog optimized for modern web browser popup windows, and `Touch` = Mobile-optimized dialog designed for modern smart phones, such as Android and iPhone.
* *Consumer Key* (required): The consumer key for the Salesforce connected app. See xref:salesforce-connector-config-topics.adoc#create-consumer-key[Create a Consumer Key].
* *Consumer Secret* (required): The consumer secret for the connector to access Salesforce.
* *Listener Config* (required): Configuration for the listener, for example, `HTTP_Listener_config`.
* *Callback Path* (required): Path for the callback, for example, `/callback`.
* *Authorize Path* (required): Path for authorization, for example, `/authorize`.
* *External Callback URL*: Callback URL, for example, `+http://localhost:8085/callback+`.

== Configure OAuth JWT Authorization

Important fields:

* *Consumer Key* (required): The consumer key for the Salesforce connected app. See xref:salesforce-connector-config-topics.adoc#create-consumer-key[Create a Consumer Key].
* *Key Store* (required): The path to the key store used to sign data during authentication. Only Java key store format is allowed. See xref:salesforce-connector-config-topics.adoc#keystoregen[Generate a Keystore File].
* *Store Password* (required): The password for the keystore.
* *Principal* (required): The Salesforce username that you want to use.

== Configure OAuth SAML Authorization

Important fields:

* *Consumer Key* (required): The consumer key for the Salesforce connected app. See xref:salesforce-connector-config-topics.adoc#create-consumer-key[Create a Consumer Key].
* *Key Store* (required): The path to the key store used to sign data during authentication. Only Java key store format is allowed. See xref:salesforce-connector-config-topics.adoc#keystoregen[Generate a Keystore File].
* *Store Password* (required): Key store password.
* *Principal* (required): Username of desired Salesforce user.

== Configure OAuth Username Password Authorization

Important fields:

* *Consumer Key* (required): The consumer key for the Salesforce connected app. See xref:salesforce-connector-config-topics.adoc#create-consumer-key[Create a Consumer Key].
* *Consumer Secret* (required): The consumer secret for the connector to access Salesforce.
* *Username* (required): Enter the Salesforce username.
* *Password* (required): Enter the corresponding password.
* *Security token*: Enter the corresponding security token.

////
== Next
Now that you have completed ____, you can try out ______.
////

== See Also

* https://forums.mulesoft.com[MuleSoft Forum]
* https://support.mulesoft.com/s/knowledge[Knowledge Base Articles]
